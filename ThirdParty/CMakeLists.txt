set(SPDLOG_USE_STD_FORMAT ON)
set(SPDLOG_ENABLE_PCH ON)
set(SPDLOG_MSVC_UTF8 ON)
add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/spdlog SYSTEM)

set(SDL_AUDIO OFF)
set(SDL_EXAMPLES OFF)
set(SDL_TESTS OFF)
set(SDL_INSTALL OFF)
set(SDL_STATIC ON)
add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/SDL SYSTEM)

set(GLM_BUILD_TESTS OFF)
set(GLM_BUILD_INSTALL OFF)
add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/glm SYSTEM)

add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/glad SYSTEM)

add_library(stb INTERFACE)
target_include_directories(stb INTERFACE ${CMAKE_CURRENT_LIST_DIR}/stb/include)

set(VMA_STATIC_VULKAN_FUNCTIONS OFF)
set(VMA_DYNAMIC_VULKAN_FUNCTIONS ON)
add_subdirectory(VulkanMemoryAllocator)

set(JSON_BuildTests OFF)
set(JSON_Install OFF)
add_subdirectory(json)

set(NFD_BUILD_TESTS OFF)
add_subdirectory(nfd)

include(CheckIPOSupported)
check_ipo_supported(RESULT IPO_SUPPORTED)
set(CMAKE_INTERPROCEDURAL_OPTIMIZATION ${IPO_SUPPORTED})

if(ZENITH_TRACK_MEMORY)
	set(TRACY_ENABLE ON)
	set(TRACY_ON_DEMAND OFF)
	set(TRACY_CALLSTACK ON)
	set(TRACY_ONLY_LOCALHOST ON)
	set(TRACY_NO_BROADCAST ON)
	set(TRACY_NO_VERIFY OFF)
	set(TRACY_SYMBOL_OFFLINE_RESOLVE OFF)
else()
	set(TRACY_ENABLE OFF)
endif()
add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/tracy SYSTEM)

if(ZENITH_TRACK_MEMORY)
	set(BACKWARD_ENABLE TRUE)
	add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/backward-cpp SYSTEM)
else()
	set(BACKWARD_ENABLE FALSE)
endif()

